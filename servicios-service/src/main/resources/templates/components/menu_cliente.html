<header class="header">

    <div class="brand">
        <div class="logo">ST</div>
        <h1>Servicios Técnicos</h1>
    </div>

    <nav class="nav">
        <a th:href="@{/servicios}">Servicios</a>
        <a th:href="@{/pedidos/listar}">Pedidos</a>
        <a th:href="@{/contacto}">Contacto</a>
        <a th:href="@{/nosotros}">Nosotros</a>
    </nav>

    <!-- USER DROPDOWN -->
    <div class="user_dropdown" id="userDropdown">
        <button class="user_dropdown_btn" id="userDropdownBtn">
            <i class="fas fa-user-circle"></i>
            <span th:text="${usuarioEmail}">cliente@example.com</span>
            <i class="fas fa-chevron-down"></i>
        </button>

        <div class="user_dropdown_menu">
            <div style="padding: 10px 15px; font-size:14px; opacity:.8;">
                <i class="fas fa-id-card"></i>
                <b th:text="${usuarioRol}" style="color: var(--accent);">Cliente</b>
            </div>

            <hr style="margin:0; border:none; border-top:1px solid rgba(255,255,255,0.1);">

            <a th:href="@{/perfil}">
                <i class="fas fa-id-badge"></i> Mi Perfil
            </a>

            <a th:href="@{/configuracion}">
                <i class="fas fa-cog"></i> Configuración
            </a>

            <a href="http://localhost:8081/auth/logout">
                <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
            </a>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const dropdown = document.getElementById("userDropdown");
            const btn = document.getElementById("userDropdownBtn");

            if (btn) {
                btn.addEventListener("click", () => {
                    dropdown.classList.toggle("open");
                });
            }

            document.addEventListener("click", (e) => {
                if (!dropdown.contains(e.target)) {
                    dropdown.classList.remove("open");
                }
            });
        });
    </script>

</header>
